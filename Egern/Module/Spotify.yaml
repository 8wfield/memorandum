name: Spotifyå»å¹¿å‘Š
description: |-
  ç§»é™¤æ’­æ”¾å¹¿å‘Šï¼Œæ¢å¤æ­Œæ‰‹å’Œä¸“è¾‘åˆ—è¡¨çš„æ­£å¸¸å±•ç¤ºã€‚
  éƒ¨åˆ†è§£é”premium,éŸ³è´¨ä¸èƒ½è®¾ç½®ä¸ºè¶…é«˜ã€‚
  å°†Spotifyçš„å¤–è¯­æ­Œè¯ç¿»è¯‘ä¸ºç®€ä½“ä¸­æ–‡ï¼Œå¹¶æä¾›åŒè¯­ç¿»è¯‘æ”¯æŒã€‚
open_url: https://apps.apple.com/app/id324684580
author: 001ProMax[https://github.com/001ProMax] å¯è‰ğŸ…¥[https://github.com/luestr/ProxyResource/blob/main/README.md] VirgilClyne[https://github.com/VirgilClyne] app2smile[https://github.com/app2smile/rules]
compat_arguments:
  ç§»é™¤ä½æ åˆ›å»ºæŒ‰é’®: '1'
  å¯ç”¨Appleè®¾å¤‡æ¥åŠ›: '#'
compat_arguments_desc: 'å°† # æ”¹æˆä»»æ„åç§°å³å¯å¼€å¯å¯¹åº”è„šæœ¬\n\néšè—ä¸º:1/true  ä¸éšè—ä¸º:0/false'
rules:
- and:
    match:
    - domain:
        match: spclient.wg.spotify.com
    - protocol:
        match: QUIC
    policy: REJECT
# > éƒ¨åˆ†è§£é”premium,éŸ³è´¨ä¸èƒ½è®¾ç½®ä¸ºè¶…é«˜(å»ºè®®ç™»å½•åå†æ‰“å¼€è„šæœ¬,é‡å¯appç­‰å¾…è„šæœ¬ç”Ÿæ•ˆ)
header_rewrites:
- delete:
    match: ^https:\/\/spclient\.wg\.spotify\.com\/user-customization-service\/v1\/customize$
    name: if-none-match
    type: request
scriptings:
- http_request:
    name: spotify-json
    match: ^https:\/\/spclient\.wg\.spotify\.com\/(artistview\/v1\/artist|album-entity-view\/v2\/album)\/
    script_url: https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-json.js
    body_required: false
- http_response:
    name: spotify-proto
    match: ^https:\/\/spclient\.wg\.spotify\.com\/(bootstrap\/v1\/bootstrap|user-customization-service\/v1\/customize)$
    script_url: https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-proto.js
    update_interval: 0
    body_required: true
    binary_body: true
url_rewrites:
- match: ^https:\/\/spclient\.wg\.spotify\.com\/(artistview\/v1\/artist|album-entity-view\/v2\/album)\/(.*)platform=iphone
  location: https://spclient.wg.spotify.com/$1/$2platform=ipad
  status_code: 307
map_locals:
- match: ^https:\/\/spclient\.wg\.spotify\.com\/pendragon\/
  status_code: 200
  headers:
    Content-Type: application/json
  body: '{}'
scriptings:
- http_response:
    name: Protobufå¤„ç†
    match: ^https:\/\/spclient\.wg\.spotify\.com\/(?:bootstrap|user-customization-service)
    script_url: https://kelee.one/Resource/Script/Spotify/Spotify_remove_ads.js
    arguments:
      _compat.$argument: '[{tab},{useractivity}]'
    timeout: 10
    body_required: true
    binary_body: true
# > æ­Œè¯ç¿»è¯‘
- http_response:
    name: è·Ÿè¸ªå“åº”Â·JSON
    match: ^https?:\/\/api\.spotify\.com\/v1\/tracks\?
    script_url: https://kelee.one/Resource/Script/Spotify/Spotify_response.js
    body_required: true
- http_request:
    name: æ­Œè¯è¯·æ±‚Â·JSON
    match: ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json
    script_url: https://kelee.one/Resource/Script/Spotify/Spotify_request.js
    body_required: true
- http_request:
    name: æ­Œè¯è¯·æ±‚Â·Proto
    match: ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)
    script_url: https://kelee.one/Resource/Script/Spotify/Spotify_request.js
    body_required: true
    binary_body: true
- http_response:
    name: ç¿»è¯‘æ­Œè¯å“åº”Â·JSON
    match: ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=Translate
    script_url: https://kelee.one/Resource/Script/Spotify/Translate_response.js
    body_required: true
- http_response:
    name: ç¿»è¯‘æ­Œè¯å“åº”Â·Proto
    match: ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=Translate
    script_url: https://kelee.one/Resource/Script/Spotify/Translate_response.js
    body_required: true
    binary_body: true
- http_response:
    name: å¤–éƒ¨æ­Œè¯å“åº”Â·JSON
    match: ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=External
    script_url: https://kelee.one/Resource/Script/Spotify/External_Lyrics_response.js
    body_required: true
- http_response:
    name: å¤–éƒ¨æ­Œè¯å“åº”Â·Proto
    match: ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=External
    script_url: https://kelee.one/Resource/Script/Spotify/External_Lyrics_response.js
    body_required: true
    binary_body: true
mitm:
  hostnames:
    includes:
    - spclient.wg.spotify.com
    - api.spotify.com