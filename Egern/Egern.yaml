# å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://doc.egernapp.com/zh-CN/docs/configuration/example
# è‡ªç”¨é…ç½® 2025/12/22


# > ä»…è™šæ‹Ÿç½‘æ¥å£æ¨¡å¼
vif_only: true

# > ç»•è¿‡ä»£ç†
bypass_tunnel_proxy:
- 192.168.0.0/16
- 10.0.0.0/8
- 172.16.0.0/12
- localhost
- '*.local'

# > DNSåŠ«æŒ
hijack_dns:
- '*:53'

# > è‡ªå®šä¹‰æ•°æ®åº“URL
geoip_db_url: https://github.com/xream/geoip/releases/latest/download/ipinfo.country-only-cn-private.mmdb
asn_db_url: https://github.com/xream/geoip/releases/latest/download/ipinfo.asn.mmdb

# > å»¶è¿Ÿæµ‹è¯•URL
proxy_latency_test_url: https://www.gstatic.com/generate_204
direct_latency_test_url: http://connectivitycheck.platform.hicloud.com/generate_204

# > æ’é™¤è·¯ç”±
vif_excluded_routes:
- 10.0.0.0/8
- 100.64.0.0/10
- 127.0.0.0/8
- 169.254.0.0/16
- 172.16.0.0/12
- 192.0.0.0/24
- 192.0.2.0/24
- 192.88.99.0/24
- 192.168.0.0/16
- 198.51.100.0/24
- 203.0.113.0/24
- 224.0.0.0/4
- 255.255.255.255/32

# > DNSè®¾ç½®
dns:
  bootstrap:
  - SYSTEM
  upstreams:
    Ali:
    - https://dns.alidns.com/dns-query
    Google:
    - https://dns.google/dns-query
    ByteDance:
    - 180.184.1.1
    - 180.184.2.2
  forward:
  - proxy_rule_set:
      match: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Ruleset/Apple.list
      value: BOOTSTRAP
      disabled: false
  - proxy_rule_set:
      match: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Ruleset/ByteDance.list
      value: ByteDance
      disabled: false
  - proxy_rule_set:
      match: https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/ruleset/direct.txt
      value: Ali
      disabled: false
  - proxy_rule_set:
      match: https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/ruleset/proxy.txt
      value: Google
      disabled: false
  - wildcard:
      match: '*'
      value: Google
      disabled: false
  hosts:
# > App Store ä¸‹è½½åŠ é€Ÿ
    updates.g.aaplimg.com:
    - updates.cdn-apple.com.download.ks-cdn.com
# > IOS ç³»ç»Ÿæ›´æ–°ä¸‹è½½åŠ é€Ÿ
    iosapps.itunes.apple.com:
    - hls.itunes.apple.com.mwcname.com
    - iosapps.itunes.apple.com.download.ks-cdn.com

# > å…¬ç½‘IPæŸ¥è¯¢EDNS
  public_ip_lookup_url: https://ipinfo.io/ip

# > ç­–ç•¥ç»„é…ç½®
policy_groups:
- external:
    name: ä»£ç†èŠ‚ç‚¹
    type: select
    urls:
    - â€œæœºåœºè®¢é˜…é“¾æ¥â€
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Proxy.png
- select:
    name: Telegram
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - æ–°å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Telegram.png
- select:
    name: TikTok
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - æ–°å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/TikTok.png
- select:
    name: AI
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - æ–°å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ChatGPT.png
- select:
    name: YouTube
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - æ–°å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/YouTube.png
- select:
    name: Twitter
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - æ–°å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Twitter.png
- select:
    name: é¦™æ¸¯èŠ‚ç‚¹
    policies:
    - ä»£ç†èŠ‚ç‚¹
    flatten: true
    filter: (?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/HongKong.png
- select:
    name: å°æ¹¾èŠ‚ç‚¹
    policies:
    - ä»£ç†èŠ‚ç‚¹
    flatten: true
    filter: (?i)ğŸ‡¨ğŸ‡³|ğŸ‡¹ğŸ‡¼|å°æ¹¾|(\b(TW|Tai|Taiwan)\b)
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Taiwan.png
- select:
    name: æ—¥æœ¬èŠ‚ç‚¹
    policies:
    - ä»£ç†èŠ‚ç‚¹
    flatten: true
    filter: (?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|ä¸œäº¬|(\b(JP|Japan)\b)
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Japan.png
- select:
    name: éŸ©å›½èŠ‚ç‚¹
    policies:
    - ä»£ç†èŠ‚ç‚¹
    flatten: true
    filter: (?i)ğŸ‡°ğŸ‡·|éŸ©å›½|é¦–å°”|(\b(KR|Korea)\b)
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Korea.png
- select:
    name: æ–°å›½èŠ‚ç‚¹
    policies:
    - ä»£ç†èŠ‚ç‚¹
    flatten: true
    filter: (?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b)
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/Singapore.png
- select:
    name: ç¾å›½èŠ‚ç‚¹
    policies:
    - ä»£ç†èŠ‚ç‚¹
    flatten: true
    filter: (?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ´›æ‰çŸ¶|åœ£ä½•å¡|(\b(US|United States)\b)
    icon: https://raw.githubusercontent.com/jnlaoshu/MySelf/main/image/UnitedStates.png
- fallback:
    name: å…œåº•ç­–ç•¥
    policies:
    - é¦™æ¸¯èŠ‚ç‚¹
    - å°æ¹¾èŠ‚ç‚¹
    - æ—¥æœ¬èŠ‚ç‚¹
    - éŸ©å›½èŠ‚ç‚¹
    - æ–°å›½èŠ‚ç‚¹
    - ç¾å›½èŠ‚ç‚¹
    icon: https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/icon/Egern.png

# > ä»£ç†åˆ†æµè§„åˆ™
rules:
- rule_set:
    match: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Ruleset/Telegram.list
    policy: Telegram
- rule_set:
    match: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Ruleset/TikTok.list
    policy: TikTok
- rule_set:
    match: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Ruleset/Twitter.list
    policy: Twitter
- rule_set:
    match: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Ruleset/AI.list
    policy: AI
- rule_set:
    match: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Ruleset/YouTube.list
    policy: YouTube
- rule_set:
    match: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/Ruleset/Apple.list
    policy: DIRECT
- rule_set:
    match: https://raw.githubusercontent.com/8wfield/memorandum/refs/heads/main/Egern/Rule/Lan.yaml
    policy: DIRECT
- geoip:
    match: CN
    policy: DIRECT
- default:
    policy: å…œåº•ç­–ç•¥

# > MITMé…ç½®
mitm:
  enabled: true
